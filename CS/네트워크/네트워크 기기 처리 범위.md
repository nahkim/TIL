# 네트워크 기기 처리 범위

---

계층별로 처리 범위를 나눌수 있다.

| **처리 가능한 계층** | **네트워크**      |
| -------------------- | ----------------- |
| 애플리케이션 계층    | L7 스위치         |
| 인터넷 계층          | 라우터, L3 스위치 |
| 데이터 링크 계층     | 브리지, L2 스위치 |
| 물리 계층            | NIC, 리피터, AP   |



### **스위치**

- 여러 장비를 연결하고
- 데이터 통신을 중재하며
- 목적지가 연결된 포트로만 전기 신호를 보내 데이터를 전송하는
- 통신 네트워크 장비



### **애플리케이션 계층**

**L7 스위치(로드 밸런서)**

로드밸런서라고도 하며 서버의 부하를 분산시키는 기기



- 클라이언트로부터 오는 요청들을 뒤쪽의 여러 서버로 나누는 역할을 하며
- 시스템이 처리할 수 있는 트래픽 증가를 목표로함
- URL, 서버, 캐시, 쿠키들을 기반으로 트래픽을 분산시킴
- 바이러스나 불필요한 외부 데이터를 걸러내는 필터링 기능도 가지고 있고 응용프로그램 수준의 트래픽 모니터링도 가능함
- 장애가 발생한 서버는 트래픽 분산 대상에서 제외해야한다 → 헬스 체크(health check)를 사용하여 감시



**헬스 체크 (health check)**

전송 주기와 재전송 횟수 등을 설정한 이후 반복적으로 서버에 요청을 보내는 것

L4 스위치 또는 L7 스위치는 헬스 체크를 통해 정상적인 서버 또는 비정상적인 서버를 판단

*헬스 체크를 할 때 서버에 부하가 되지 않을 만큼 요청 횟수를 해야함*



헬스 체크 방법

TCP, HTTP를 이용



**L4 스위치와 L7 스위치**

공통점

로드밸런서



차이점

**L4 스위치**

인터넷 계층을 처리

스트리밍 관련 서비스에선 사용 불가

메세지를 기반으로 인식하지 못함

IP와 포트를 기반으로 트래픽을 분산



**L7 로드밸런서(스위치)**

IP, 포트 외에도 URL, HTTP 헤더, 쿠키 등을 기반으로 트래픽을 분산

클라우드 서비스에서 L7 스위치를 이용한 로드밸런싱 : ALB(Application Load Balancer) 컴포넌트로 함

L4 스위치를 이용한 로드밸런싱 : NLB (Network Load Balancer) 컴포넌트로 함



### **로드밸런서를 이용한 서버 이중화**

로드밸런서 대표적 기능 : 서버 이중화

서비스를 안정적으로 운용하기 위해서 2대 이상의 서버가 필수적임

ex) 에러로 인해 서버 1대가 종료되도 나머지 서버가 서비스를 제공할 수 있기 때문에 안정적이다.



### **로드밸런서**

2대 이상의 서버를 기반으로 가상 IP를 제공하고 이를 기반으로 안정적인 서비스를 제공함



참고 : [**면접을 위한 CS 전공지식 노트**](https://search.shopping.naver.com/book/catalog/32478035848?cat_id=50010920&frm=PBOKPRO&query=cs+면접&NaPm=ct%3Dlek2tw0w|ci%3D5f7c24f8231a09f6e7d9e1f2a16abb311f84205d|tr%3Dboknx|sn%3D95694|hk%3D81f9b580de8803af9d189a29d0e29135be6f780b)